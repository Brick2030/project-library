# Гейм-дизайн.
## На случай если документ появится в открытом доступе:
> Данный материал был создан в целях обучения, авторы документа ни на что не претендуют, не преследуют выгоду, ссылки на оригинальные материалы были предоставлены в их оригинальном названии, текст является удобной для восприятия форматированной выжимкой оригиналов.

## Категория 0 - Идеи для разбора и TODO-list:
1. [Параметры в играх без прототипа](https://youtu.be/7Pf4fLhn2KQ)
2. [Как и зачем писать дизайн документ для игры](https://youtu.be/xccxmytvnC4)
3. [Как сделать хорошее управление персонажем](https://youtu.be/AeUsoCKCr-0)
4. Объединить категории по темам.
5. Упростить текст, выжать воду сохранив понятность где это возможно.
   
## Категория 1:

### Ошибки геймдизайна https://www.youtube.com/watch?v=QexiewMinCQ
1. Большинство спотыкается об нереализуемую идею. В качестве своей первой игры нужно делать что то максимально простое. Когда берешься за большой проект, и долгое время не видя результата - быстро теряешь мотивацию.
2. Отсутствие целостности в тайтле. Графическое несовпадение предметов окружения, например простой персонаж и сильная детализация противника, особенно если разная стилистика и разрешение. Или например несоблюдение сеттингов, например несоответствие саунд-дизайна визуальной стилистике.

### Концепция MDA - Как создать ИГРУ МЕЧТЫ https://www.youtube.com/watch?v=6FQX08W90Fw
Эта концепция рассматривает геймдизайн как *совокупность Механики Динамики Эстетики*. 

**Механика** - как работает игра, ее правила, функционал кнопок
**Динамика** - реакция игрока на механику, поведение и действие в рамках механики.

**Пример**: В шутере основная механика - стрельба. Если патронов будет много, игрок будет идти в самый "замес" без раздумий, а дефицит патронов заставляет игрока лишний раз не вступать в схватку.

**Эстетика** - эмоциональный отклик игрока, что он ощущает проходя игру.
Если патронов много, игрок будет ощущать себя неудержимой машиной, если патронов мало, игрок будет анализировать, стоит ли вступать в бой и т.п.
*Любое изменение механики автоматически ведет к изменению динамики и эстетики.*

"Во главе угла" геймдизайна стоит именно эстетика. Мы определяем набор механик в игре именно исходя из тех эмоций которые мы хотим чтобы испытал игрок. Но эстетика субъективна и одна и та же механика может вызвать диаметрально противоположную реакцию у разных игроков.

## Категория 2

### Как правильно ВОРОВАТЬ механики из игр — деконструкция в геймдизайне https://www.youtube.com/watch?v=_f6LGY3i6Mw
Игровая механика - конкретные действие игрока и конкретное изменение игровой среды, которое оно за собой влечет.
**Атомарные и комплексные игровые механики:**
Базовые механики подобно шкале здоровья, называют атомарными - они могут складываться в сложные системы, которые называют **комплексными механиками**, например получение урона от вражеских атак - комплексная механика, которая вкючает в себя несколько систем. 
**Суть деконструкции** - разобрать комплесную механику на части, проанализировать каждый из ее компонентов, внести изменения и пересобрать все заново для собственного проекта.
**Пример деконструкции комплексной механики получения урона:**
- шкала здоровья, ее убавление и восполнение
- Способности игрока уклонения или парирования
- Временные эффекты, бафы и дебафы, правила их наложения
- Система экипировки, может ли игрок надеть доспех который поглотит часть урона.
- Урон влияет на то как реагирует основные системы. Может ли он остановить или замедлить игрока,  и т.д.

**Поиск референсов:**
Вы определяете жанр собственной игры и **составляете список тегов, которые ее характеризуют, а затем по тегам ищите похожие игры**. При отборе игр референсов учитывают их рейтинги и объем продаж, снижая риски дизайнерских ошибок. Подберите несколько, 3-5 рефов, посмотрите летсплеи, **найдите в них нужные механики для деконструкции**. 
Следующий шаг: сами поиграйте в эти игры, ради пользовательского опыта, чтобы разобраться в чем фан этих механик. Не стоит охватить всё и сразу, если вы изучаете вход в игру, т.е. первые 30 минут геймплея, то сосредоточтесь на них, если изучаете глубокие механики, появляющиеся через несколько часов, то проиграйте несколько часов чтобы разобраться в динамике.

**Еще один пример деконструкци**:
Допустим хотим сделать такую же механику поведения камеры как в другой игре, но добавив еще что то свое. Понадобится записать на видео все возможные варианты поведения камеры которые встречаются во время игры. Записанные ролики собираются в одной папке. Ролики нужно собрать по режимам поведения камеры, например:
- режим по умолчанию - камера следует за игроком на заданной дистанции а мышь управляет ее вращением по орбите игрока.
- с зажатой кнопкой прицеливания - камера уходит за плечо игрока  и перемещается как в шутерах.
- Нажатие кнопки быстрой атаки - камера выхватывает ближайшего противника не упуская игрока из поля зрения
- В катсценах камера либо резко прыгает на нужный ракурс и отбирает управление, либо плавно плавно перетекает держа в центре внимания объект. Все эти режимы нужно образить в виде UML-диаграммы. Каждому режиму камеры привязывают ссылку на соответствующий видос. Когда все добавленно, можно отсечь лишние ветки обобщая схожие параметры. Вычисленные переменные и все такое записываются в дизайн документ.

### Как развить механику, чтобы игрок не заскучал https://www.youtube.com/watch?v=CT_F10KCU-k
Если игровая механика никак не будет меняться при прохождении, то игрок заскучает, ведь никому не нравится подолгу выполнять одни и те же действия приходя к одинаковым результатам. Но постоянно вводить новые механики тоже нельзя, ведь игрок не будет ощущать развития. Правильно - необходимо развивать уже имеющиеся механики.

**Как развиваются механики.**
*Механика* - правила взаимодействия игрока с игрой. Есть скрытые механики, т.е. внутренние, о которых игрок ничего не знает и наружными - с помощью которых игрок непосредственно взаимодействует с **матрицей состояний**: 
> изменение состояния игры -> анализ изменений -> действия игрока / внутри игровое событие -> обратная связь (это блоки взаимодействия с игрой). 
Раньше у игр не было обратной связи, и игроку было иногда сложно отследить изменения. Однако современные игры часто перебарщивают с обратной связью, вознаграждая игрока почти за каждый клик.
Механика может видоизменяться и развиваться по ходу прохождения или в зависимости от опыта игрока.

Если разработчики меняют правила, по которым она работает, *т.е. ее воздействие на блоки обратной связи и состояния игры*, то это **техническое преобразование механики**. 
А если разработчик ничего не меняет а игрок начинает иначе взаимодействовать с механикой, то трансформация происодит на **ментальном уровне**, *в блоках анализа и действиях игрока*. (Игрок учится и воспринимает иначе механику которая уже есть). (Например били просто так, а потом начали бить по таймингам).

**Техниеское развитие**.
Чтобы изменить правила можно поменять числовые характеристики - это *вертикальное изменение*. Или повлиять на результат механики - это *горизонтальное изменение*. Часто эти прогрессии идут бок о бок. Пример вертикального изменения - увеличение урона при прокачке. Пример горизонтального измения - двойной прыжок. Изменение механики для получения новых результатов.
**Ментальное развитие**
Ментальный тип развития никак не меняет механику в игре ни численно ни логически, но *меняет поведение игрока по мере приобретения опыта*, то как, когда и зачем он ее использует. *Ментальное развитие происходит за счет проведенного в игре времени*, преодоления в ней новых препятствий, а так же при обучении от других игроков. 
**Развития не произойдет если дизайнер не заставит игрока взглянуть на механику с иной стороны** для решения стоящей перед ним задачи. Игрока нужно подтолкнуть, дать ему разглядеть потенциал механики и заставить использовать ее нестандартно. 
Большинство головоломок основаны на ментальном развитии небольшого набора механик.
**Ключевой катализатор ментальной прогрессии это вопрос "а что если?"**, задавая его себе, новичок начнет эксперементировать, применит механику в связке с разными сущностями в разных ситуациях и получит новую информацию. *В блоке анализа увеличится количество узнаваемых паттернов, а значит расширится разнообразие в блоке действий*. 
Чем больше сущностей затрагивает механика тем глужбе и интереснее она станет для игрока, но только при условии правильного баланса и наличия задач, требущиющих от игрока экспериментов, иначе механику будут использовать только в ее самом банальном варианте, без креатива.

## Категория 3 - Шутеры:

### Шутеры от первого лица устроены сложнее, чем вы думали  https://www.youtube.com/watch?v=OKdmz5SeTFk
Двигайся ,стреляй из разного оружия в зависимости от обстановки. Только эту простую формулу нужно суметь углубить так, чтобы игрок наслаждался механикой и чтобы ему не надоело. Нужно добиться приятного импакта от стрельбы, добавить эффектов, настроить скорость, правильно поработать с камерой, попытаться правильно передать характер героя на которого толком нельзя посмотреть.
**Как работают шутеры от первого лица:**

**Модель оружия**: Для того, чтобы оружие хорошо смотрелось в руках персонажа нужно учесть перспективу. Модель которая выглядит интересна сама по себе в редакторе не обязательно хорошо смотрится от первого лица. Для большей выразительности, разработчики часто гипертрофируют внешний вид оружия, ведь в реальности силуэт при прицеливании читается плохо, оружие черное и его форму не очень хорошо видно. Поэтому в играх на оружие наносят дополнительные потертости и блики, чтобы очертания были проще различить. А еще разница между игровым и реальным оруижем видна на примере прицела. В жизни для попадания нужно совместить мишень целик и мушку. В играх для прицеливания хватит мушки, так что реальные прицелы приходится корректировать под нужды игрового процесса. При прицеливании используется глубина резкости, что замыливает все что вне прицела. Нужно это учитывать при создании силуэта оружия.

**Расположение модели в кадре**:
Прежде чем переходить к проработке анимаций и стрельбы, важно правильно поставить ее кадре. Условно оружие в играх делится на 2 категории:
- Динамическое: оружие ближнего боя, или инструменты которые можно разглядеть с различных углов во время игры или катсцен
.
- Статические: При стрельбе видим часто левую сторону оружия.

Чтобы оружие не загораживало поле боя но сохраняло масштаб относительно окружения в играх его принято размещать в правом нижнем углу экрана. Так чтобы оно занимало не больше 1/8(4й?) части изображения.  Разрабы Medal of honor warfighter использоали для расположения оружия золотое сечение. В одной игре использовалась система разграничения UI по зонам. Боевая - центр, куда стрелять, безопасная - по краям от от центра, где иногда появляются руки или какие то элементы, и переферия, куда игрок никогда не смотрит и там ничего нет.
Оружие само по себе как часть UI, показывает какой мощью располагает игрок. Перспективно оно направленно в центр экрана.
Пушки одного класса должны перемещаться схоже.

**Хитрости камеры**
0) Два основных подхода:
- Можно анимировать саму модель персонажа и привязать к ней камеру.
- Можно разделить модель на 2 части, вид от первого лица не та же модель что и от первого.
1) Шутеры делятся на 3 слоя:
- Окружение
- Оружие
- Интерфейс.
Оружие должно быть отдельным слоем, чтобы при изменении угла камеры не сбивались пропорции анимаций и т.п.
2) Во время активного действия голова человека рефлекторно поворачивается в его сторону. При рукопашном ударе камера на несколько мгновений поворачивается в сторону действия и возвращается обратно. Это движение почти не заметно, но оно добавляет естественность в анимацию. Можно не только повернуть камеру, но и продвинуть ее, что даст ощущение отдачи от атаки.
3) Все действия должны перетекать друг в друга без пауз.
4) Игрока нужно убедить что за пределами камера находится тело персонажа., при этом важно чтобы анимации, например перезарядки, не загораживали линию прицеливания.

## Категория 4 Организация производства.

### Геймдизайн: Как начать делать свою игру?  https://www.youtube.com/watch?v=QhnP9MhQMgQ
Снижение вероятности перегорания.
- Из организации максимум расшарить между участниками проекта документ в котором будут итоги обсуждений.

- **Не вставляйте графику, когда не готов геймплей**. Часто бывает что нарисовали кучу всего, но с геймплеем это не соотносится, из за чего приходится что то выкидывать. Бывает что графон не подходит к геймплею. Сначала сделайте более менее играбельный прототип, если вы в этом прототипе уверены, если видете как персонаж перемещается, как взаимодейтсвуют объекты, тогда потихоньку добавляйте туда графику, с осторожностью. Не нужно сразу на весь проект. Сначала делайте прототип, на кубах, примитивах, посмотрите как это играется, затем постепенно вставляйте графику.

- **Начните с чего то небольшого и доведите до конца, прочуствуйте то, как игра работает, как она публикуются на маркеты**. Сделайте копию чего то, просто ради того чтобы понять как это работает. Ключевые механики делать интересно, вроде врагов и т.п, но без всего остального, без пауз, систем подсчета и т.п.  это не очень. Проделайте это все, хотя бы на базовом уровне, до момента когда можно сказать всё, это законченная целая игра. Если вы не завершали никаких проектов, вам нужно это прочувствовать. Научиьесб доводить игры до конца, это важное качество.

- **Не давить на участников команды**. Пинания портят атмосферу и отношения. Самое главное сохранить нормальные отношения, можно взять перерыв. это не работа.

- **Не думайте о продажах, метриках и прочем**, о том как она будет удерживать игроков. Думайте о себе, думайте чтобы вам это нравилось. Набираясь опыта на всё это можно забить.

- **Показывайте прогресс**. Можете завести страницу, форум, не бойтесь выложить свою идею и что ее украдут. Наоборот, если вы выкладываете свой прогресс, это мотивирует вас, возможно у вас будет обратная связь, возможно кто то что то посоветует, и когда о чем то рассказываешь то поялвяется мотивация это делать, накапливается некая лента событий, и если давно ничего не обновлялось проще начать. У этого может быть и обратная сторона, могут набежать поехавшие, начать всё критиковать, важно это фильтровать и не демотивироваться из за этого. Особо не слушайте какую либо критику, не спешите все добавлять в игру что советуют комментаторы.

- **Для того чтобы можно было начать делать игру, придумайте синопсис, описание, которое будет укладываться в одно предложение**. Вокруг этого строится и повествование. Описание должны быть короткое. Например "У юрия пропала жена и он пошел ее искать". Слишком развернутое и подробное описание загоняет вас в рамки, на первых порах это не нужно, нужно уцепится за какую то идею, которую просто объяснить самому себе. Если особенно вы кого то захотите пригласить в разработку, важно иметь заготовку, которую можно объснить очень просто одним предложением.

- **Гоните перфекционизм**. Не нужно делать идеальные формы, делать кристально чистый код и т.д. Лучше выбрать средний графон и релиз игры, чем ультра графон, но при этом стагнацию проекта. Когда у вас игра есть, лучше чем когда игры у вас нет. Это касается вообще всего, сюжета в том числе.

- **Старайтесь не бросать**. Выделяйте хотя бы немного времени каждый день, ставя напрмер помидрный таймер, но делайте хоть что то. Посмотрите хотя бы 20 минут на код, посмотрите на проект. Подвигайте что то, возможно вы что то придумаете, или даже ничего не измените.

### Геймдизайн: Как не бросить делать игру? Метод "Быстрые победы"  https://www.youtube.com/watch?v=wzakD0fgCpo
Метод простых побед: когда в основном проекте возникает просадка мотивации идет переключение на очень очень очень маленькую игру которую доделываешь за максимально короткий срок. Это ключевые слова. Должно быть очень быстро, грубо говоря за один заход. Нужно так же понимать что должно быть конечным результатом, чтобы не свалится в разработку еще одного бесконечного проекта. За это время, ваш мозг может перестроится и посмотреть на предыдущие задачи под другим углом, будет еще прилив мотивации из за завершенного дела. Важно держать в голове что мини игра должна быть конечной, то к чему вы больше не вернетесь, испытаете прилив мотивации и продолжите работать над основным проектом.
Есть минус. Когда вы работаете над мини игрой, есть соблазн забросить основной проект.

### Геймдизайн: Архитектура вашей игры https://www.youtube.com/watch?v=6vgYZX6XXts
1) Создание State-машины. Эта машина - паттерн проектирования, который представляет собой набор изолированных состояний игры, и правила по которым между этими состояниями игра переходит. Например состояние инициализации, состояние геймплея и состояние гейм-овера. Ключевое - состояния изолированы. Что происходит во время геймплея не происходит в то время когда не прошла инициализация, и игра не продолжает играть во время геймовера. Когда игра перешла в новое состояние, она не делает что то из других состояний. Когда она может пригодится: например нужно добавить окно инвентаря, и при взаимодействии с ним если это не состояние, геймплейные механики останутся на кнопках мыши, игрок будет поворачивать камеру и т.п. Если нет условий, тогда нужно писать всякие там дополнения к скриптам что когда открыт инвентарь то не надо обрабатывать мышь и т.п. это накапливается и создает много багов.

2) Game manager - самая главная система игры. Система которая отвечает за все события и за те действия,  которые может делать ваша игра. Спавнить врагов, производить инициализацию игры, простраивать уровень игры и так далее. В связке с State-машиной, состояния вызывают game-manager и заставляют его проводить инициализацию и прочее, например иницилизация говорит иницилазировать, состояние геймплея говорит заспавнить врагов и т.д. Он является ядром игры, с октрытыми методами.

3) Библиотека ассетов. Там хранятся статические объекты, всякие иконки и прочее. Game-manager обращается туда и подставляет куда что нужно, например иконки инвентаря.

4) Менеджер данных - хранит в себе данные игрока, данные мира, и взаимодействует между ними. Все данные структурированы в одном месте и есть система с ними работающая. Например идет инициализация и нужно понять какой уровень строить, иницилазиация говорит менеджеру запускать инициализацию, менджер идет к дата-менеджеру, загружает сейв, данные игрока, и в данных игрока говорится что первый уровень.

5) UI-менеджер. Рисует UI, принимает нажатия игрока на интерфейс, открывает какие то окна, закрывает. Пример: идет геймплей, игрок открывает инвентарь, game manager говорит машине запустить состояние инвентаря, State machine запускает состояние инвентаря, в это времчя ничего другого не обрабатывается, состояние говорит game-manager-у открыть инвентарь, game-manger говорит UI manager открыть окно, в окне иконки, и забирает их из библиотеки ассетов.

6) Sound manager. Тоже работает через game-manager. Например наступил стейт гейм-овер, надо мелодию проигрыша включить, и он берет ее из библиотеки ассетов.

7) Object pools - паттерн проектирования, который позволяет менеджить похожие объекты, которые в игре нужно включать и выключать, и пользоваться ими. Пример: пули, вспышки, системы частиц, то чего много, появляется и изчезает в больших количествах. Создание и уничтожение объекта - дорогая для процессора. Object-pools представляет собой список объектов, который заранее уже созданный в игре и он отвечает за то чтобы нужный объект включился, отработал и отключился, но не удалился.

8) Localization, text manager - В игре может быть много текста, если заранее об этом не подумать то может получится что на какой то кнопке текст может быть внутри самой кнопки, и все вообще разбросано. И когда встает вопрос перевода на другой язык, то системы если заранее не продумать где хранить эти текста и как с ними работать. Всегда удобно иметь сисетму где все текста храняться.
